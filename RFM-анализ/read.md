## RFM-анализ клиентской базы аптечной сети
### Цели и задачи
Основной мотив исследования: скоро сезон активных продаж спадет и выручки в аптеке начнут падать. У компании есть механизм СМС-рассылок, но хотят провести персонализированную рассылку, чтобы не потратить бюджет впустую.
Для этого было проведено исследование клиентской базы аптечной сети с помощью RFM-анализа, который позволил классифицировать покупателей на основании истории их покупок и были сформированы рекомендации, какой группе покупателей что предлагать.
## Об RFM-анализе
RFM-анализ — метод анализа, позволяющий сегментировать клиентов по частоте и сумме покупок и выявлять тех, которые приносят больше денег.
Аббревиатура RFM расшифровывается:
* Recency — давность (как давно пользователи что-то покупали)
* Frequency — частота (как часто они покупают)
* Monetary — деньги (общая сумма покупок).
По каждому из этих признаков мы выделяем по три равные группы. Затем присваиваем каждой группе числовое обозначение от 1 до 3 
* Давность последней покупки (Recency)
* Частота покупок (Frequency)
* Сумма покупки (Monetary)
1 - недавние клиенты
1 - частые
1 - большая
2 - редкие нерегулярные
2 - редкие
2 - средняя
3 - давние, возможно потерянные
3 - очень редкие
3 - маленькая

После разделения людей на группы получаем максимум 27 сегментов. 
Анализ помогает определить клиентов, которые покупают часто и на большие суммы, клиентов, которые регулярно возвращаются за небольшими покупками, и клиентов, которые давно ничего не покупали
Таргетирование рассылок на определенные группы клиентов дает гораздо большую конверсию рекламы, нежели одинаковая не персонализированная реклама.

## Структура базы данных
Для исследования использовалась таблица Bonuscheques (БД Аптека), которая содержит информацию о транзакциях по бонусным картам card (т.е.это постоянные клиенты, они оставили свои телефоны)
Если в момент покупки касса была в оффлайн-режиме, то вместо номера карты записывается зашифрованная последовательность символов. В таком случае номер карты силами этой базы данных никак восстановить нельзя. Поэтому в исследование взяты покупки, которые можно идентифицировать.
Также из исследования исключены покупатели, сделавшие одну покупку – им нет смысла предлагать персональную скидку для повышения среднего чека.
datetime - дата и время совершения транзакции
summ - сумма чека
 
## Выбор метрик для анализа
Основная сложность RFM-анализа — определить границы сегментов, потому что универсальных рекомендаций по этому поводу нет.
В данном исследовании для того, чтобы оценить распределение покупателей, были рассчитаны средние, медианы и перцентили, а также построен boxplot.
Среднее – самый популярный статистический показатель, но чувствительный к выбросам, которые смещают среднее значение и могут ввести в заблуждение. Медиана показывает центральное значение в выборке. 
В нашем случае средняя сумма покупок 5018 руб., медианная сумма 2708 руб. Значения сильно отличаются, и мы можем предположить наличие выбросов (отдельные клиенты покупали на очень большие суммы).
Среднее количество покупок 5,7, медианное количество - 3. Можем предположить, что у аптечной сети много разовых покупателей, которых хорошо бы сделать постоянными лояльным клиентами.
Перцентили позволяют нарезать слоями массив данных и понять, на какие группы делятся элементы. Таким образом, покажут изменения с большей точностью, но спрячут выбросы. 
Для большей точности было сделано распределение по децилям.
Для того, чтобы убедиться в правильности расчетов и посмотреть визуально, было сделано распределение по квартилям (построен боксплот)
И подсчитаны кумулятивные сумма и количество заказов, т.к.закон Парето про 80/20

Некоторые сегменты есть смысл объединить, если они очень маленькие по количеству покупателей или сходны по стратегии работы с ними.
У отдела маркетинга тоже очень много задач и написать 27 вариантов работы с группами, в которых 10-50 человек - и затратно, и может возникнуть путаница при отправке сообщений, ну и вряд ли эти 27 вариантов будут как-то концептуально отличаться между собой, т.е.может получиться “работа ради работы”, а не результата.
Поэтому покупатели были объединены в 7 логических групп:

## Выводы
В результате проведенного RFM-анализа клиентской базы аптечной сети были сформированы 7 групп покупателей для рассылки смс-сообщений с целью увеличить чек и частоту покупок.
Распределение покупателей получилось удобным и похожим на распределение по правилу Парето, которое уважаемо и применимо в работе в условиях ограниченных ресурсов, человеческих и денежных. А ресурсы ограничены всегда)

Группы достаточно большие, чтобы не распылять силы, но при этом объединены по своему поведению.
### Фокусы глобально:
* Увеличить частоту посещения аптеки
* Увеличить средний чек
